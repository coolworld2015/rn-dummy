<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<div class="col-sm-8">

    <svg id="yard" viewBox="0 0 1400 650 " xmlns="http://www.w3.org/2000/svg">
        <!-- Created with Method Draw width="1330" height="642.0000000000001" "#d8d8d8" - http://github.com/duopixel/Method-Draw/ -->
        <g id="svg_gate">
            <rect height="10" width="25" y="75" x="0" stroke-width="0.15" stroke="#000"></rect>
            <rect height="75.097018" width="18" y="0.0" x="3.5" stroke-width="0.1" stroke="#000"></rect>
        </g>
        <g id="svg_parking">
            <rect height="75.097018" width="18" y="0.0" x="3.5" stroke-width="0.1" stroke="#000"></rect>
        </g>
        <g id="svg_parkingH">
            <rect height="18" width="75.097018" y="0.0" x="0" stroke-width="0.1" stroke="#000"></rect>
        </g>
        <g>
            <title>Blanco</title>
            <rect fill="#ffffff" id="canvas_background" height="644" width="1332" y="-1" x="-1"></rect>
            <g display="none" id="canvasGrid">
                <rect fill="url(#gridpattern)" stroke-width="0" y="0" x="0" height="100%" width="100%" id="svg_1"></rect>
            </g>
        </g>
        <g>
            <title>Layer 1</title>
            <rect stroke="#000" id="svg_3" height="340" width="986" y="292.030928" x="143.082474" stroke-opacity="null" fill="#e5e5e5"></rect>
            <rect stroke="#000" id="svg_4" height="189" width="127.113404" y="299.484053" x="5.469069" stroke-opacity="null" fill="#e5e5e5"></rect>
            <rect id="svg_5" height="0" width="5" y="258.453125" x="247.5" stroke-opacity="null" stroke="#000" fill="#e5e5e5"></rect>
            <rect id="svg_8" height="1" width="0" y="280.453125" x="227.5" stroke-opacity="null" stroke="#000" fill="#e5e5e5"></rect>
            <rect id="svg_9" height="0" width="3" y="317.453125" x="152.5" stroke-opacity="null" stroke="#000" fill="#e5e5e5"></rect>
            <rect id="svg_10" height="0" width="1" y="264.453125" x="185.5" stroke-opacity="null" stroke="#000" fill="#e5e5e5"></rect>
            <rect stroke="#000" id="svg_12" height="120" width="447.000004" y="8.453125" x="877.499996" fill-opacity="null" stroke-opacity="null" stroke-width="null" fill="#e5e5e5"></rect>
            <rect id="svg_13" height="422.99999" width="143" y="176.453125" x="1179.5" fill-opacity="null" stroke-opacity="null" stroke-width="null" fill="#e5e5e5" stroke="#000"></rect>
            <rect stroke="#000" id="svg_15" height="41.999999" width="245.639187" y="8.453125" x="205.067011" fill-opacity="null" stroke-opacity="null" stroke-width="null" fill="#e5e5e5"></rect>
            <rect id="svg_17" height="0" width="2" y="109.453125" x="417.5" fill-opacity="null" stroke-opacity="null" stroke-width="null" stroke="#000" fill="#e5e5e5"></rect>
        </g>
        <g id="gates" display="marker">
            <!--
            <use id="1" href="#svg_gate" x="300" y="272" height="75" width="50" ><title>Occuped by Misha</title></use>
            <use id="2" href="#svg_gate" x="330" y="272" />
            <use id="3" href="#svg_gate" x="360" y="272" />
                -->
            <use id="1" fill="#d8d8d8" href="#svg_gate" y="207" x="993"><title>1 free</title></use><use id="2" fill="#d8d8d8" href="#svg_gate" y="207" x="960"><title>2 free</title></use><use id="3" fill="#d8d8d8" href="#svg_gate" y="207" x="927"><title>3 free</title></use><use id="4" fill="#d8d8d8" href="#svg_gate" y="207" x="894"><title>4 free</title></use><use id="5" fill="#d8d8d8" href="#svg_gate" y="207" x="861"><title>5 free</title></use><use id="6" fill="#d8d8d8" href="#svg_gate" y="207" x="828"><title>6 free</title></use><use id="7" fill="#d8d8d8" href="#svg_gate" y="207" x="795"><title>7 free</title></use><use id="8" fill="#d8d8d8" href="#svg_gate" y="207" x="762"><title>8 free</title></use><use id="9" fill="#d8d8d8" href="#svg_gate" y="207" x="729"><title>9 free</title></use><use id="10" fill="#d8d8d8" href="#svg_gate" y="207" x="696"><title>10 free</title></use><use id="11" fill="#d8d8d8" href="#svg_gate" y="207" x="663"><title>11 free</title></use><use id="12" fill="#d8d8d8" href="#svg_gate" y="207" x="630"><title>12 free</title></use><use id="13" fill="#d8d8d8" href="#svg_gate" y="207" x="597"><title>13 free</title></use><use id="14" fill="#d8d8d8" href="#svg_gate" y="207" x="564"><title>14 free</title></use><use id="15" fill="#d8d8d8" href="#svg_gate" y="207" x="531"><title>15 free</title></use><use id="16" fill="#d8d8d8" href="#svg_gate" y="207" x="498"><title>16 free</title></use><use id="17" fill="#d8d8d8" href="#svg_gate" y="207" x="465"><title>17 free</title></use><use id="18" fill="#d8d8d8" href="#svg_gate" y="207" x="432"><title>18 free</title></use><use id="19" fill="#d8d8d8" href="#svg_gate" y="207" x="399"><title>19 free</title></use><use id="20" fill="#d8d8d8" href="#svg_gate" y="207" x="366"><title>20 free</title></use><use id="21" fill="#d8d8d8" href="#svg_gate" y="207" x="333"><title>21 free</title></use><use id="22" fill="#d8d8d8" href="#svg_gate" y="207" x="300"><title>22 free</title></use><use id="23" fill="#d8d8d8" href="#svg_gate" y="207" x="267"><title>23 free</title></use><use id="24" fill="#d8d8d8" href="#svg_gate" y="207" x="234"><title>24 free</title></use><use id="25" fill="#d8d8d8" href="#svg_gate" y="207" x="201"><title>25 free</title></use><use id="26" fill="#d8d8d8" href="#svg_gate" y="207" x="168"><title>26 free</title></use><use id="P1" fill="#d8d8d8" href="#svg_parkingH" y="185" x="1215"><title>P1 free</title></use><use id="P2" fill="#d8d8d8" href="#svg_parkingH" y="210" x="1215"><title>P2 free</title></use><use id="P3" fill="#d8d8d8" href="#svg_parkingH" y="235" x="1215"><title>P3 free</title></use><use id="P4" fill="#d8d8d8" href="#svg_parkingH" y="260" x="1215"><title>P4 free</title></use><use id="P5" fill="#d8d8d8" href="#svg_parkingH" y="285" x="1215"><title>P5 free</title></use><use id="P6" fill="#d8d8d8" href="#svg_parkingH" y="310" x="1215"><title>P6 free</title></use><use id="P7" fill="#d8d8d8" href="#svg_parkingH" y="335" x="1215"><title>P7 free</title></use><use id="P8" fill="#d8d8d8" href="#svg_parkingH" y="360" x="1215"><title>P8 free</title></use><use id="P9" fill="#d8d8d8" href="#svg_parkingH" y="385" x="1215"><title>P9 free</title></use><use id="P10" fill="#d8d8d8" href="#svg_parkingH" y="410" x="1215"><title>P10 free</title></use><use id="P11" fill="#d8d8d8" href="#svg_parkingH" y="435" x="1215"><title>P11 free</title></use><use id="P12" fill="#d8d8d8" href="#svg_parkingH" y="460" x="1215"><title>P12 free</title></use><use id="P13" fill="#d8d8d8" href="#svg_parkingH" y="485" x="1215"><title>P13 free</title></use><use id="P14" fill="#d8d8d8" href="#svg_parkingH" y="510" x="1215"><title>P14 free</title></use><use id="P15" fill="#d8d8d8" href="#svg_parkingH" y="535" x="1215"><title>P15 free</title></use><use id="P16" fill="#d8d8d8" href="#svg_parkingH" y="560" x="1215"><title>P16 free</title></use><use id="H1" fill="#d8d8d8" href="#svg_parkingH" y="312" x="30"><title>H1 free</title></use><use id="H2" fill="#d8d8d8" href="#svg_parkingH" y="337" x="30"><title>H2 free</title></use><use id="H3" fill="#d8d8d8" href="#svg_parkingH" y="362" x="30"><title>H3 free</title></use><use id="H4" fill="#d8d8d8" href="#svg_parkingH" y="387" x="30"><title>H4 free</title></use><use id="H5" fill="#d8d8d8" href="#svg_parkingH" y="412" x="30"><title>H5 free</title></use><use id="H6" fill="#d8d8d8" href="#svg_parkingH" y="437" x="30"><title>H6 free</title></use><use id="Z1" fill="#d8d8d8" href="#svg_parkingH" y="20" x="240"><title>Z1 free</title></use><use id="Z2" fill="#d8d8d8" href="#svg_parkingH" y="20" x="330"><title>Z2 free</title></use><use id="WB1" fill="#d8d8d8" href="#svg_parking" y="20" x="883"><title>WB1 free</title></use><use id="WB2" fill="#d8d8d8" href="#svg_parking" y="20" x="910"><title>WB2 free</title></use><use id="WB3" fill="#d8d8d8" href="#svg_parking" y="20" x="937"><title>WB3 free</title></use><use id="WB4" fill="#d8d8d8" href="#svg_parking" y="20" x="964"><title>WB4 free</title></use><use id="WB5" fill="#d8d8d8" href="#svg_parking" y="20" x="991"><title>WB5 free</title></use><use id="WB6" fill="#d8d8d8" href="#svg_parking" y="20" x="1018"><title>WB6 free</title></use><use id="WB7" fill="#d8d8d8" href="#svg_parking" y="20" x="1045"><title>WB7 free</title></use><use id="WB8" fill="#d8d8d8" href="#svg_parking" y="20" x="1072"><title>WB8 free</title></use><use id="WB9" fill="#d8d8d8" href="#svg_parking" y="20" x="1099"><title>WB9 free</title></use><use id="WB10" fill="#d8d8d8" href="#svg_parking" y="20" x="1126"><title>WB10 free</title></use><use id="WB11" fill="#d8d8d8" href="#svg_parking" y="20" x="1153"><title>WB11 free</title></use><use id="WB12" fill="#d8d8d8" href="#svg_parking" y="20" x="1180"><title>WB12 free</title></use><use id="WB13" fill="#d8d8d8" href="#svg_parking" y="20" x="1207"><title>WB13 free</title></use><use id="WB14" fill="#d8d8d8" href="#svg_parking" y="20" x="1234"><title>WB14 free</title></use><use id="WB15" fill="#d8d8d8" href="#svg_parking" y="20" x="1261"><title>WB15 free</title></use><use id="WB16" fill="#d8d8d8" href="#svg_parking" y="20" x="1288"><title>WB16 free</title></use><use id="WB17" fill="#d8d8d8" href="#svg_parking" y="207" x="1053"><title>WB17 free</title></use><use id="WB18" fill="#d8d8d8" href="#svg_parking" y="207" x="1080"><title>WB18 free</title></use></g>
    </svg>
    <script src="Scripts/jquery.signalR-2.4.1.min.js"></script>
    <script src="Scripts/yardSVG.js"></script>
    <!--Reference the autogenerated SignalR hub script. -->
    <script src="signalr/hubs"></script>
    <script type="text/javascript">
        function getStandingPlace(gateName) {
            return document.getElementById(gateName);
        }
        function getColor(state) {
            var result = "#d8d8d8";
            switch (state) {
                case 'occupied': result = 'red';break;
                case 'free': result = "#d8d8d8";break;
            }
            return result;
        }
        function changeState(gateName, state,unit) {
            var gate = getStandingPlace(gateName)
            if (gate != null) {
                gate.setAttribute('fill', getColor(state));
            }
            if (unit !== null && state == "occupied") {
                $("#" + gateName + " > title").each(function (index, e) { e.innerHTML = gateName + " " + state + " by " + unit; });
            }
            else {
                $("#" + gateName).attr('title', gateName + " " + status);
            }
        }

        fillGates(960, 207, 33);
        fillP1(1215, 210, 25);
        fillH(30, 337, 30);
        fillZ(330, 20, 90);
        fillWB(910, 20, 27);
        fillWB1718(1080, 207, 27);

        $(function () {
            // Declare a proxy to reference the hub.
            var chat = $.connection.yardHub;
            // Create a function that the hub can call to broadcast messages.
            chat.client.standingstatechanged = function (message) {
                // Html encode display name and message.
                var a = JSON.parse(message);
                changeState(a.standing, a.status,a.unit);
            };

            // Set initial focus to message input box.
            // Start the connection.
            $.connection.hub.start()
                .done(function () {

                });
            $.connection.hub.start().fail(function () {
                console.log("Fail connenct to the hub.");
            });
        });
        /*
        function UpdateYardSituation() {
            var url = "https://yardcorestandard20191016105818.azurewebsites.net/api/Yard/GetYardSituation";
            jQuery.ajax({
                url: url,
                type:"GET",
                async: true,
                context: document.body
            }).success(function());
        }
        */
        $.get("https://yardcorestandard20191016105818.azurewebsites.net/api/Yard/GetYardSituation");
        $(document).ready({

        });
    </script>
</div>
</body>
</html>